(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{202:function(s,a,n){"use strict";n.r(a);var e=n(0),t=Object(e.a)({},function(){var s=this,a=s.$createElement,n=s._self._c||a;return n("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[n("h1",{attrs:{id:"_1-2-1-umi-使用"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_1-2-1-umi-使用","aria-hidden":"true"}},[s._v("#")]),s._v(" 1.2.1 umi 使用")]),s._v(" "),n("blockquote",[n("p",[s._v("umi，中文可发音为乌米，是一个可插拔的企业级 react 应用框架。umi 以路由为基础的，支持类 next.js 的约定式路由，以及各种进阶的路由功能，并以此进行功能扩展，比如支持路由级的按需加载。然后配以完善的插件体系，覆盖从源码到构建产物的每个生命周期，支持各种功能扩展和业务需求，目前内外部加起来已有 50+ 的插件。")])]),s._v(" "),n("blockquote",[n("p",[s._v("📦 开箱即用，内置 react、react-router 等\n🏈 类 next.js 且功能完备的路由约定，同时支持配置的路由方式\n🎉 完善的插件体系，覆盖从源码到构建产物的每个生命周期\n🚀 高性能，通过插件支持 PWA、以路由为单元的 code splitting 等\n💈 支持静态页面导出，适配各种环境，比如中台业务、无线业务、egg、支付宝钱包、云凤蝶等\n🚄 开发启动快，支持一键开启 dll 和 hard-source-webpack-plugin 等\n🐠 一键兼容到 IE9，基于 umi-plugin-polyfills\n🍁 完善的 TypeScript 支持，包括 d.ts 定义和 umi test\n🌴 与 dva 数据流的深入融合，支持 duck directory、model 的自动加载、code splitting 等等")])]),s._v(" "),n("p",[n("img",{attrs:{src:"https://gw.alipayobjects.com/zos/rmsportal/zvfEXesXdgTzWYZCuHLe.png",alt:""}})]),s._v(" "),n("h2",{attrs:{id:"install"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#install","aria-hidden":"true"}},[s._v("#")]),s._v(" install")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("# 全局安装 umi\n\nyarn global add umi\n\n使用 yarn 安装后全局还是不能使用 umi，\n[解决方法](https://github.com/fairyly/mynodejs/blob/gh-pages/1.2.5%20%E8%A7%A3%E5%86%B3yarn%E5%85%A8%E5%B1%80%E5%AE%89%E8%A3%85%E6%A8%A1%E5%9D%97%E5%90%8E%E4%BD%86%E4%BB%8D%E6%8F%90%E7%A4%BA%E6%97%A0%E6%B3%95%E6%89%BE%E5%88%B0%E5%91%BD%E4%BB%A4%E7%9A%84%E9%97%AE%E9%A2%98.md)\n\n最后改用 npm i -g umi\n\n出现问题：\nnpm ERR! code ETARGET\nnpm ERR! notarget No matching version found for @babel/generator@^7.2.2\nnpm ERR! notarget In most cases you or one of your dependencies are requesting\nnpm ERR! notarget a package version that doesn't exist.\nnpm ERR! notarget\nnpm ERR! notarget It was specified as a dependency of '@babel/core'\nnpm ERR! notarget\n\n由于原来使用的是公司的源，就切换到 淘宝源之后重新安装就可以了\n\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br")])]),n("h2",{attrs:{id:"usage（test）"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#usage（test）","aria-hidden":"true"}},[s._v("#")]),s._v(" usage（test）")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("建个空目录:\nmkdir myapp && cd myapp\n\n通过 umi g 创建一些页面:\n\n$ umi g page index\n$ umi g page users\n\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br")])]),n("h2",{attrs:{id:"通过脚手架创建项目"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#通过脚手架创建项目","aria-hidden":"true"}},[s._v("#")]),s._v(" 通过脚手架创建项目")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("mkdir myapp && cd myapp\nnpm create umi\n\n选择 app\n\n? Do you want to use typescript? (y/N) n\n\n选择 antd\n\n\n\n创建完成 \n\nnpm start 启动\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br")])]),n("h2",{attrs:{id:"目录"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#目录","aria-hidden":"true"}},[s._v("#")]),s._v(" 目录")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("一个复杂应用的目录结构如下：\n\n.\n├── dist/                          // 默认的 build 输出目录\n├── mock/                          // mock 文件所在目录，基于 express\n├── config/\n    ├── config.js                  // umi 配置，同 .umirc.js，二选一\n└── src/                           // 源码目录，可选\n    ├── layouts/index.js           // 全局布局\n    ├── pages/                     // 页面目录，里面的文件即路由\n        ├── .umi/                  // dev 临时目录，需添加到 .gitignore\n        ├── .umi-production/       // build 临时目录，会自动删除\n        ├── document.ejs           // HTML 模板\n        ├── 404.js                 // 404 页面\n        ├── page1.js               // 页面 1，任意命名，导出 react 组件\n        ├── page1.test.js          // 用例文件，umi test 会匹配所有 .test.js 和 .e2e.js 结尾的文件\n        └── page2.js               // 页面 2，任意命名\n    ├── global.css                 // 约定的全局样式文件，自动引入，也可以用 global.less\n    ├── global.js                  // 可以在这里加入 polyfill\n    ├── app.js                     // 运行时配置文件\n├── .umirc.js                      // umi 配置，同 config/config.js，二选一\n├── .env                           // 环境变量\n└── package.json\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br")])]),n("blockquote",[n("p",[s._v(".umi 中会生成一些配置文件，如本地路由配置等"),n("br"),s._v("\n注意：（不要直接在这里修改代码，umi 重启或者 pages 下的文件修改都会重新生成这个文件夹下的文件。）")])]),s._v(" "),n("h2",{attrs:{id:"路由"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#路由","aria-hidden":"true"}},[s._v("#")]),s._v(" 路由")]),s._v(" "),n("blockquote",[n("p",[s._v("介绍的路由使用可以在 "),n("a",{attrs:{href:"https://github.com/umijs/umi-examples/tree/master/routes",target:"_blank",rel:"noopener noreferrer"}},[s._v("umi-examples/routes"),n("OutboundLink")],1),s._v(" 和 "),n("a",{attrs:{href:"https://github.com/umijs/umi-examples/tree/master/routes-via-config",target:"_blank",rel:"noopener noreferrer"}},[s._v("umi-examples/routes-via-config"),n("OutboundLink")],1),s._v(" 里找到示例代码")])]),s._v(" "),n("h4",{attrs:{id:"约定式路由"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#约定式路由","aria-hidden":"true"}},[s._v("#")]),s._v(" 约定式路由")]),s._v(" "),n("blockquote",[n("p",[s._v("约定 pages 下所有的 js、jsx、ts 和 tsx 文件即路由。")])]),s._v(" "),n("h6",{attrs:{id:"基础路由"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#基础路由","aria-hidden":"true"}},[s._v("#")]),s._v(" 基础路由")]),s._v(" "),n("p",[s._v("假设 pages 目录结构如下：")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("+ pages/  \n  + users/  \n    - index.js  \n    - list.js  \n  - index.js  \n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br")])]),n("p",[s._v("那么，umi 会自动生成路由配置如下：")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("[\n  { path: '/', component: './pages/index.js' },\n  { path: '/users/', component: './pages/users/index.js' },\n  { path: '/users/list', component: './pages/users/list.js' },\n]\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br")])]),n("h4",{attrs:{id:"动态路由"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#动态路由","aria-hidden":"true"}},[s._v("#")]),s._v(" 动态路由")]),s._v(" "),n("blockquote",[n("p",[s._v("umi 里约定，带 $ 前缀的目录或文件为动态路由。")])]),s._v(" "),n("p",[s._v("比如以下目录结构：")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("+ pages/\n  + $post/\n    - index.js\n    - comments.js\n  + users/\n    $id.js\n  - index.js\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br")])]),n("p",[s._v("会生成路由配置如下：")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("[\n  { path: '/', component: './pages/index.js' },\n  { path: '/users/:id', component: './pages/users/$id.js' },\n  { path: '/:post/', component: './pages/$post/index.js' },\n  { path: '/:post/comments', component: './pages/$post/comments.js' },\n]\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br")])]),n("h4",{attrs:{id:"可选的动态路由"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#可选的动态路由","aria-hidden":"true"}},[s._v("#")]),s._v(" 可选的动态路由")]),s._v(" "),n("blockquote",[n("p",[s._v("umi 里约定动态路由如果带 $ 后缀，则为可选动态路由。")])]),s._v(" "),n("p",[s._v("比如以下结构：")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("+ pages/\n  + users/\n    - $id$.js\n  - index.js\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br")])]),n("p",[s._v("会生成路由配置如下：")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("[\n  { path: '/': component: './pages/index.js' },\n  { path: '/users/:id?': component: './pages/users/$id$.js' },\n]\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br")])]),n("h5",{attrs:{id:"嵌套路由"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#嵌套路由","aria-hidden":"true"}},[s._v("#")]),s._v(" 嵌套路由")]),s._v(" "),n("blockquote",[n("p",[s._v("umi 里约定目录下有 _layout.js 时会生成嵌套路由，以 _layout.js 为该目录的 layout 。")])]),s._v(" "),n("p",[s._v("比如以下目录结构：")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("+ pages/\n  + users/\n    - _layout.js\n    - $id.js\n    - index.js\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br")])]),n("p",[s._v("会生成路由配置如下：")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("[\n  { path: '/users', component: './pages/users/_layout.js',\n    routes: [\n     { path: '/users/', component: './pages/users/index.js' },\n     { path: '/users/:id', component: './pages/users/$id.js' },\n   ],\n  },\n]\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br")])]),n("h1",{attrs:{id:"全局-layout"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#全局-layout","aria-hidden":"true"}},[s._v("#")]),s._v(" 全局 layout")]),s._v(" "),n("blockquote",[n("p",[s._v("约定 src/layouts/index.js 为全局路由，返回一个 React 组件，通过 props.children 渲染子组件。")])]),s._v(" "),n("p",[s._v("比如：")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("export default function(props) {\n  return (\n    <>\n      <Header />\n      { props.children }\n      <Footer />\n    </>\n  );\n}\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br")])]),n("h5",{attrs:{id:"不同的全局-layout"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#不同的全局-layout","aria-hidden":"true"}},[s._v("#")]),s._v(" 不同的全局 layout")]),s._v(" "),n("blockquote",[n("p",[s._v("你可能需要针对不同路由输出不同的全局 layout，umi 不支持这样的配置，"),n("br"),s._v("\n但你仍可以在 layouts/index.js 对 location.path 做区分，渲染不同的 layout 。")])]),s._v(" "),n("p",[s._v("比如想要针对 /login 输出简单布局，")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("export default function(props) {\n  if (props.location.pathname === '/login') {\n    return <SimpleLayout>{ props.children }</SimpleLayout>\n  }\n\n  return (\n    <>\n      <Header />\n      { props.children }\n      <Footer />\n    </>\n  );\n}\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br")])]),n("h5",{attrs:{id:"_404-路由"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_404-路由","aria-hidden":"true"}},[s._v("#")]),s._v(" 404 路由")]),s._v(" "),n("blockquote",[n("p",[s._v("约定 pages/404.js 为 404 页面，需返回 React 组件。")])]),s._v(" "),n("p",[s._v("比如：")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("export default () => {\n  return (\n    <div>I am a customized 404 page</div>\n  );\n};\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br")])]),n("blockquote",[n("p",[s._v("注意：开发模式下，umi 会添加一个默认的 404 页面来辅助开发，但你仍然可通过精确地访问 /404 来验证 404 页面。")])]),s._v(" "),n("h5",{attrs:{id:"配置式路由"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#配置式路由","aria-hidden":"true"}},[s._v("#")]),s._v(" 配置式路由")]),s._v(" "),n("blockquote",[n("p",[s._v("如果你倾向于使用配置式的路由，可以配置 routes ，此配置项存在时则不会对 src/pages 目录做约定式的解析。")])]),s._v(" "),n("p",[s._v("比如：")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("export default {\n  routes: [\n    { path: '/', component: './a' },\n    { path: '/list', component: './b', Routes: ['./routes/PrivateRoute.js'] },\n    { path: '/users', component: './users/_layout',\n      routes: [\n        { path: '/users/detail', component: './users/detail' },\n        { path: '/users/:id', component: './users/id' }\n      ]\n    },\n  ],\n};\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br")])]),n("blockquote",[n("p",[s._v("注意：component 是相对于 src/pages 目录的")])]),s._v(" "),n("h5",{attrs:{id:"权限路由"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#权限路由","aria-hidden":"true"}},[s._v("#")]),s._v(" 权限路由")]),s._v(" "),n("blockquote",[n("p",[s._v("umi 的权限路由是通过配置路由的 Routes 属性来实现。约定式的通过 yaml 注释添加，配置式的直接配上即可。")])]),s._v(" "),n("p",[s._v("比如有以下配置：")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("[\n  { path: '/', component: './pages/index.js' },\n  { path: '/list', component: './pages/list.js', Routes: ['./routes/PrivateRoute.js'] },\n]\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br")])]),n("p",[s._v("然后 umi 会用 ./routes/PrivateRoute.js 来渲染 /list。")]),s._v(" "),n("p",[s._v("./routes/PrivateRoute.js 文件示例：")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("export default (props) => {\n  return (\n    <div>\n      <div>PrivateRoute (routes/PrivateRoute.js)</div>\n      { props.children }\n    </div>\n  );\n}\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br")])]),n("h5",{attrs:{id:"启用-hash-路由"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#启用-hash-路由","aria-hidden":"true"}},[s._v("#")]),s._v(" 启用 Hash 路由")]),s._v(" "),n("blockquote",[n("p",[s._v("umi 默认是用的 Browser History，如果要用 Hash History，需配置：")])]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("export default {\n  history: 'hash',\n}\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br")])]),n("h2",{attrs:{id:"参考"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#参考","aria-hidden":"true"}},[s._v("#")]),s._v(" 参考")]),s._v(" "),n("ul",[n("li",[n("a",{attrs:{href:"https://umijs.org/zh/guide/getting-started.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("docs"),n("OutboundLink")],1)])])])},[],!1,null,null,null);a.default=t.exports}}]);