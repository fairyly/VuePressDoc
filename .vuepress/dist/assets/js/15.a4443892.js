(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{299:function(s,e,a){"use strict";a.r(e);var n=a(0),t=Object(n.a)({},function(){var s=this,e=s.$createElement,a=s._self._c||e;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h1",{attrs:{id:"_1-2-5-create-react-app-antd-less配置"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-2-5-create-react-app-antd-less配置","aria-hidden":"true"}},[s._v("#")]),s._v(" 1.2.5 Create-react-app+Antd+Less配置")]),s._v(" "),a("blockquote",[a("p",[s._v("最开始使用 Create-react-app 搭建项目，引入 antd,后来在写组件的时候发现引入 less 文件样式未生效")])]),s._v(" "),a("p",[s._v("之后开始配置,看到很多的文章中提到收拾配置 webpack ;有的地方看到了 "),a("code",[s._v("React-app-rewired")])]),s._v(" "),a("h2",{attrs:{id:"_1-暴露webpack配置文件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-暴露webpack配置文件","aria-hidden":"true"}},[s._v("#")]),s._v(" 1.暴露webpack配置文件")]),s._v(" "),a("blockquote",[a("p",[s._v("使用 create-react-app 创建的项目，默认情况下是看不到 webpack 相关的配置文件，我们需要给它暴露出来，使用")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("yarn eject\n\n\n? Are you sure you want to eject? This action is permanent. Yes\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br")])]),a("blockquote",[a("p",[s._v("目录多了一个config文件夹")])]),s._v(" "),a("h2",{attrs:{id:"_2-安装"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-安装","aria-hidden":"true"}},[s._v("#")]),s._v(" 2.安装")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("yarn add less less-loader\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h2",{attrs:{id:"_3-修改-webpack-config-js"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-修改-webpack-config-js","aria-hidden":"true"}},[s._v("#")]),s._v(" 3.修改 webpack.config.js")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("{\n  test: /\\.(css|less)$/,\n  use: [\n    require.resolve('style-loader'),\n    /*{\n      loader: require.resolve('css-loader'),\n      options: {\n        importLoaders: 1,\n      },\n    },*/\n    \n    {\n      loader: require.resolve('less-loader') // compiles Less to CSS\n    }\n  ],\n},\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br")])]),a("blockquote",[a("p",[s._v("配置好后重新 yarn start,报错：")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("Error: [BABEL] H:\\react\\antd-demo\\src\\index.js: Cannot find module '@babel/plugin-transform-react-jsx-source' (While processing: \"H:\\\\react\\\\antd-demo\\\\node_modules\\\\babel-preset-react-app\\\\index.js$1\")\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("ul",[a("li",[s._v("解决办法： 先删除 node_modules ,再 yarn install,yarn start")])]),s._v(" "),a("blockquote",[a("p",[s._v("又出现 indent 缩进问题，原来 我编辑器设置 2 ，.eslitrc.js 中配置的 4，")])]),s._v(" "),a("blockquote",[a("p",[s._v("又遇到less 问题")])]),s._v(" "),a("blockquote",[a("p",[s._v('"less": "^3.9.0",'),a("br"),s._v('\n"less-loader": "^4.1.0",'),a("br"),s._v('\n"webpack": "4.28.3",')])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v('Failed to compile.\n\n./src/container/login/login.less (./node_modules/css-loader!./node_modules/less-loader/dist/cjs.js??ref--6-2!./node_modules/file-loader/dist/cjs.js??ref--7-oneOf-7!./src/container/login/login.less)\n\nmodule.exports = __webpack_public_path__ + "static/media/login.50cb196b.less";\n             ^\nUnrecognised input\n      in H:\\react\\antd-demo\\src\\container\\login\\login.less (line 1, column 15)\n\n')])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br")])]),a("blockquote",[a("blockquote",[a("blockquote",[a("p",[s._v("确实没有 vue 的配置好")])])])]),s._v(" "),a("h2",{attrs:{id:"这一栏就是less-文件加载问题，说明我前面配置的-less-loader-有问题"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#这一栏就是less-文件加载问题，说明我前面配置的-less-loader-有问题","aria-hidden":"true"}},[s._v("#")]),s._v(" 这一栏就是less 文件加载问题，说明我前面配置的 less-loader 有问题")]),s._v(" "),a("p",[s._v("最后又去找一些配置")]),s._v(" "),a("p",[s._v("修改 webpack.config.js")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("# 1.添加正则\n// style files regexes\nconst cssRegex = /\\.css$/;\nconst cssModuleRegex = /\\.module\\.css$/;\nconst sassRegex = /\\.(scss|sass)$/;\nconst sassModuleRegex = /\\.module\\.(scss|sass)$/;\nconst lessRegex = /\\.less$/;\nconst lessModuleRegex = /\\.module\\.less$/;\n\n# 2.在 `module: { rules 中 有一个 oneOf` 内添加配置\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br")])]),a("p",[s._v('{\n// "oneOf" will traverse all following loaders until one will\n// match the requirements. When no loader matches it will fall\n// back to the "file" loader at the end of the loader list.\noneOf: [')]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("\n# 配置less\n{\n  test: lessRegex,\n  exclude: sassModuleRegex,\n  use: getStyleLoaders(\n    {\n      importLoaders: 2,\n      sourceMap: isEnvProduction && shouldUseSourceMap\n    },\n    'less-loader'\n  ),\n  // Don't consider CSS imports dead code even if the\n  // containing package claims to have no side effects.\n  // Remove this when webpack adds a warning or an error for this.\n  // See https://github.com/webpack/webpack/issues/6571\n  sideEffects: true\n},\n// Adds support for CSS Modules, but using SASS\n// using the extension .module.scss or .module.sass\n{\n  test: lessModuleRegex,\n  use: getStyleLoaders(\n    {\n      importLoaders: 2,\n      sourceMap: isEnvProduction && shouldUseSourceMap,\n      modules: true,\n      getLocalIdent: getCSSModuleLocalIdent\n    },\n    'less-loader'\n  )\n},\n// \"file\" loader makes sure those assets get served by WebpackDevServer.\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br"),a("span",{staticClass:"line-number"},[s._v("27")]),a("br"),a("span",{staticClass:"line-number"},[s._v("28")]),a("br"),a("span",{staticClass:"line-number"},[s._v("29")]),a("br"),a("span",{staticClass:"line-number"},[s._v("30")]),a("br"),a("span",{staticClass:"line-number"},[s._v("31")]),a("br"),a("span",{staticClass:"line-number"},[s._v("32")]),a("br"),a("span",{staticClass:"line-number"},[s._v("33")]),a("br")])]),a("h2",{attrs:{id:"参考"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#参考","aria-hidden":"true"}},[s._v("#")]),s._v(" 参考")]),s._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"https://blog.csdn.net/jackie_bobo/article/details/88352568",target:"_blank",rel:"noopener noreferrer"}},[s._v("2019-03-26最新版的create-react-app如何添加less"),a("OutboundLink")],1)]),s._v(" "),a("li",[a("a",{attrs:{href:"https://webpack.docschina.org/loaders/less-loader/",target:"_blank",rel:"noopener noreferrer"}},[s._v("webpack4.29-less-loader"),a("OutboundLink")],1)]),s._v(" "),a("li",[a("a",{attrs:{href:"https://blog.csdn.net/qq_40963664/article/details/80590729",target:"_blank",rel:"noopener noreferrer"}},[s._v("Create-react-app+Antd+Less配置"),a("OutboundLink")],1)])])])},[],!1,null,null,null);e.default=t.exports}}]);