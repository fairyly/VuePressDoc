(window.webpackJsonp=window.webpackJsonp||[]).push([[94],{230:function(a,s,n){"use strict";n.r(s);var r=n(0),t=Object(r.a)({},function(){var a=this,s=a.$createElement,n=a._self._c||s;return n("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[n("h1",{attrs:{id:"_3-4-8-数组扁平化"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_3-4-8-数组扁平化","aria-hidden":"true"}},[a._v("#")]),a._v(" 3.4.8 数组扁平化")]),a._v(" "),n("blockquote",[n("p",[a._v("把嵌套多层的数组转化成只有一层的数组")])]),a._v(" "),n("h2",{attrs:{id:"_1-es6-提供了-flat-方法"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_1-es6-提供了-flat-方法","aria-hidden":"true"}},[a._v("#")]),a._v(" 1.es6 提供了 flat() 方法")]),a._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[a._v("[2,3,[33,5,6,[66,77]].flat() //该方法返回一个新数组，对原数据没有影响\n\n")])]),a._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[a._v("1")]),n("br"),n("span",{staticClass:"line-number"},[a._v("2")]),n("br")])]),n("p",[a._v("flatMap()方法对原数组的每个成员执行一个函数（相当于执行Array.prototype.map()），然后对返回值组成的数组执行flat()方法。"),n("br"),a._v("\n该方法返回一个新数组，不改变原数组。")]),a._v(" "),n("p",[a._v("// 相当于 [[2, 4], [3, 6], [4, 8]].flat()\n[2, 3, 4].flatMap((x) => [x, x * 2])\n// [2, 4, 3, 6, 4, 8]")]),a._v(" "),n("h2",{attrs:{id:"_2-递归"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_2-递归","aria-hidden":"true"}},[a._v("#")]),a._v(" 2.递归")]),a._v(" "),n("p",[a._v("循环数组元素，如果还是一个数组，就递归调用该方法：")]),a._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[a._v("// 方法 1\nvar arr = [1, [2, [3, 4]]];\n\nfunction flatten(arr) {\n    var result = [];\n    for (var i = 0, len = arr.length; i < len; i++) {\n        if (Array.isArray(arr[i])) {\n            result = result.concat(flatten(arr[i]))\n        }\n        else {\n            result.push(arr[i])\n        }\n    }\n    return result;\n}\n\n\nconsole.log(flatten(arr))\n")])]),a._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[a._v("1")]),n("br"),n("span",{staticClass:"line-number"},[a._v("2")]),n("br"),n("span",{staticClass:"line-number"},[a._v("3")]),n("br"),n("span",{staticClass:"line-number"},[a._v("4")]),n("br"),n("span",{staticClass:"line-number"},[a._v("5")]),n("br"),n("span",{staticClass:"line-number"},[a._v("6")]),n("br"),n("span",{staticClass:"line-number"},[a._v("7")]),n("br"),n("span",{staticClass:"line-number"},[a._v("8")]),n("br"),n("span",{staticClass:"line-number"},[a._v("9")]),n("br"),n("span",{staticClass:"line-number"},[a._v("10")]),n("br"),n("span",{staticClass:"line-number"},[a._v("11")]),n("br"),n("span",{staticClass:"line-number"},[a._v("12")]),n("br"),n("span",{staticClass:"line-number"},[a._v("13")]),n("br"),n("span",{staticClass:"line-number"},[a._v("14")]),n("br"),n("span",{staticClass:"line-number"},[a._v("15")]),n("br"),n("span",{staticClass:"line-number"},[a._v("16")]),n("br"),n("span",{staticClass:"line-number"},[a._v("17")]),n("br"),n("span",{staticClass:"line-number"},[a._v("18")]),n("br")])]),n("h2",{attrs:{id:"_3-tostring"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_3-tostring","aria-hidden":"true"}},[a._v("#")]),a._v(" 3.toString")]),a._v(" "),n("p",[a._v("如果数组的元素都是数字，那么我们可以考虑使用 toString 方法，因为：")]),a._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[a._v('[1, [2, [3, 4]]].toString() // "1,2,3,4"\n')])]),a._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[a._v("1")]),n("br")])]),n("p",[a._v("调用 toString 方法，返回了一个逗号分隔的扁平的字符串，这时候我们再 split，然后转成数字不就可以实现扁平化了吗？")]),a._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[a._v("// 方法2\nvar arr = [1, [2, [3, 4]]];\n\nfunction flatten(arr) {\n    return arr.toString().split(',').map(function(item){\n        return +item\n    })\n}\n\nconsole.log(flatten(arr))\n")])]),a._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[a._v("1")]),n("br"),n("span",{staticClass:"line-number"},[a._v("2")]),n("br"),n("span",{staticClass:"line-number"},[a._v("3")]),n("br"),n("span",{staticClass:"line-number"},[a._v("4")]),n("br"),n("span",{staticClass:"line-number"},[a._v("5")]),n("br"),n("span",{staticClass:"line-number"},[a._v("6")]),n("br"),n("span",{staticClass:"line-number"},[a._v("7")]),n("br"),n("span",{staticClass:"line-number"},[a._v("8")]),n("br"),n("span",{staticClass:"line-number"},[a._v("9")]),n("br"),n("span",{staticClass:"line-number"},[a._v("10")]),n("br")])]),n("p",[a._v("然而这种方法使用的场景却非常有限，如果数组是 [1, '1', 2, '2'] 的话，这种方法就会产生错误的结果。")]),a._v(" "),n("h2",{attrs:{id:"reduce"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#reduce","aria-hidden":"true"}},[a._v("#")]),a._v(" reduce")]),a._v(" "),n("p",[a._v("既然是对数组进行处理，最终返回一个值，我们就可以考虑使用 reduce 来简化代码：")]),a._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[a._v("// 方法3\nvar arr = [1, [2, [3, 4]]];\n\nfunction flatten(arr) {\n    return arr.reduce(function(prev, next){\n        return prev.concat(Array.isArray(next) ? flatten(next) : next)\n    }, [])\n}\n\nconsole.log(flatten(arr))\n...\n")])]),a._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[a._v("1")]),n("br"),n("span",{staticClass:"line-number"},[a._v("2")]),n("br"),n("span",{staticClass:"line-number"},[a._v("3")]),n("br"),n("span",{staticClass:"line-number"},[a._v("4")]),n("br"),n("span",{staticClass:"line-number"},[a._v("5")]),n("br"),n("span",{staticClass:"line-number"},[a._v("6")]),n("br"),n("span",{staticClass:"line-number"},[a._v("7")]),n("br"),n("span",{staticClass:"line-number"},[a._v("8")]),n("br"),n("span",{staticClass:"line-number"},[a._v("9")]),n("br"),n("span",{staticClass:"line-number"},[a._v("10")]),n("br"),n("span",{staticClass:"line-number"},[a._v("11")]),n("br")])]),n("p",[a._v("ES6 增加了扩展运算符，用于取出参数对象的所有可遍历属性，拷贝到当前对象之中：")]),a._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[a._v("var arr = [1, [2, [3, 4]]];\nconsole.log([].concat(...arr)); // [1, 2, [3, 4]]\n")])]),a._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[a._v("1")]),n("br"),n("span",{staticClass:"line-number"},[a._v("2")]),n("br")])]),n("p",[a._v("我们用这种方法只可以扁平一层，但是顺着这个方法一直思考，我们可以写出这样的方法：")]),a._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[a._v("// 方法4\nvar arr = [1, [2, [3, 4]]];\n\nfunction flatten(arr) {\n\n    while (arr.some(item => Array.isArray(item))) {\n        arr = [].concat(...arr);\n    }\n\n    return arr;\n}\n\nconsole.log(flatten(arr))\n")])]),a._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[a._v("1")]),n("br"),n("span",{staticClass:"line-number"},[a._v("2")]),n("br"),n("span",{staticClass:"line-number"},[a._v("3")]),n("br"),n("span",{staticClass:"line-number"},[a._v("4")]),n("br"),n("span",{staticClass:"line-number"},[a._v("5")]),n("br"),n("span",{staticClass:"line-number"},[a._v("6")]),n("br"),n("span",{staticClass:"line-number"},[a._v("7")]),n("br"),n("span",{staticClass:"line-number"},[a._v("8")]),n("br"),n("span",{staticClass:"line-number"},[a._v("9")]),n("br"),n("span",{staticClass:"line-number"},[a._v("10")]),n("br"),n("span",{staticClass:"line-number"},[a._v("11")]),n("br"),n("span",{staticClass:"line-number"},[a._v("12")]),n("br"),n("span",{staticClass:"line-number"},[a._v("13")]),n("br")])]),n("h2",{attrs:{id:"参考"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#参考","aria-hidden":"true"}},[a._v("#")]),a._v(" 参考")]),a._v(" "),n("ul",[n("li",[n("a",{attrs:{href:"http://es6.ruanyifeng.com/?search=gcc&x=0&y=0#docs/array#%E6%95%B0%E7%BB%84%E5%AE%9E%E4%BE%8B%E7%9A%84-flat%EF%BC%8CflatMap",target:"_blank",rel:"noopener noreferrer"}},[a._v("ES6---数组实例的 flat()，flatMap() "),n("OutboundLink")],1)]),a._v(" "),n("li",[n("a",{attrs:{href:"https://github.com/mqyqingfeng/Blog/issues/36",target:"_blank",rel:"noopener noreferrer"}},[a._v("JavaScript专题之数组扁平化"),n("OutboundLink")],1)])])])},[],!1,null,null,null);s.default=t.exports}}]);