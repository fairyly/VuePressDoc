<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>2016-10-29 微信小程序开发 | 大前端</title>
    <meta name="description" content="大前端">
    <link rel="icon" href="/favicon.ico">
    
    <link rel="preload" href="/assets/css/0.styles.587b07ae.css" as="style"><link rel="preload" href="/assets/js/app.044c1617.js" as="script"><link rel="preload" href="/assets/js/2.5cf661ab.js" as="script"><link rel="preload" href="/assets/js/38.b37821e4.js" as="script"><link rel="prefetch" href="/assets/js/10.cd1d4264.js"><link rel="prefetch" href="/assets/js/100.3240bd16.js"><link rel="prefetch" href="/assets/js/101.e25b7e3a.js"><link rel="prefetch" href="/assets/js/102.88c0b278.js"><link rel="prefetch" href="/assets/js/103.a4a1053f.js"><link rel="prefetch" href="/assets/js/104.45207c69.js"><link rel="prefetch" href="/assets/js/105.35dc825c.js"><link rel="prefetch" href="/assets/js/106.f634b5da.js"><link rel="prefetch" href="/assets/js/107.63ebe1b0.js"><link rel="prefetch" href="/assets/js/108.f0e2664b.js"><link rel="prefetch" href="/assets/js/109.2ca31304.js"><link rel="prefetch" href="/assets/js/11.b6328aa3.js"><link rel="prefetch" href="/assets/js/110.c6e2b819.js"><link rel="prefetch" href="/assets/js/111.7976c9ab.js"><link rel="prefetch" href="/assets/js/112.485ccd4f.js"><link rel="prefetch" href="/assets/js/113.793f517a.js"><link rel="prefetch" href="/assets/js/114.0e8d7f7a.js"><link rel="prefetch" href="/assets/js/115.9a898279.js"><link rel="prefetch" href="/assets/js/116.6cae0125.js"><link rel="prefetch" href="/assets/js/117.b82b180d.js"><link rel="prefetch" href="/assets/js/12.d600be8f.js"><link rel="prefetch" href="/assets/js/13.d97eba7c.js"><link rel="prefetch" href="/assets/js/14.934041bb.js"><link rel="prefetch" href="/assets/js/15.a4443892.js"><link rel="prefetch" href="/assets/js/16.0ebcef58.js"><link rel="prefetch" href="/assets/js/17.c72650d2.js"><link rel="prefetch" href="/assets/js/18.cd38bbd8.js"><link rel="prefetch" href="/assets/js/19.929f94e2.js"><link rel="prefetch" href="/assets/js/20.6d09dbcf.js"><link rel="prefetch" href="/assets/js/21.63432cb4.js"><link rel="prefetch" href="/assets/js/22.1fbfdff3.js"><link rel="prefetch" href="/assets/js/23.1f7f95b2.js"><link rel="prefetch" href="/assets/js/24.227fad86.js"><link rel="prefetch" href="/assets/js/25.d155d59b.js"><link rel="prefetch" href="/assets/js/26.9637026f.js"><link rel="prefetch" href="/assets/js/27.0c2b253e.js"><link rel="prefetch" href="/assets/js/28.c236c972.js"><link rel="prefetch" href="/assets/js/29.9c6ddd1f.js"><link rel="prefetch" href="/assets/js/3.22732f15.js"><link rel="prefetch" href="/assets/js/30.ee0555dd.js"><link rel="prefetch" href="/assets/js/31.16452473.js"><link rel="prefetch" href="/assets/js/32.5e49c657.js"><link rel="prefetch" href="/assets/js/33.16355e5a.js"><link rel="prefetch" href="/assets/js/34.0b67e6a2.js"><link rel="prefetch" href="/assets/js/35.1fec96b6.js"><link rel="prefetch" href="/assets/js/36.68363f7d.js"><link rel="prefetch" href="/assets/js/37.fb523562.js"><link rel="prefetch" href="/assets/js/39.65769db2.js"><link rel="prefetch" href="/assets/js/4.f23d031f.js"><link rel="prefetch" href="/assets/js/40.85709546.js"><link rel="prefetch" href="/assets/js/41.cd129143.js"><link rel="prefetch" href="/assets/js/42.9942988a.js"><link rel="prefetch" href="/assets/js/43.99ca0d04.js"><link rel="prefetch" href="/assets/js/44.ecaa3c92.js"><link rel="prefetch" href="/assets/js/45.d8f8d5c0.js"><link rel="prefetch" href="/assets/js/46.9c4a770f.js"><link rel="prefetch" href="/assets/js/47.8cfef5ad.js"><link rel="prefetch" href="/assets/js/48.6c0ec442.js"><link rel="prefetch" href="/assets/js/49.5433e219.js"><link rel="prefetch" href="/assets/js/5.bc84b383.js"><link rel="prefetch" href="/assets/js/50.55ffc527.js"><link rel="prefetch" href="/assets/js/51.9b5a56b6.js"><link rel="prefetch" href="/assets/js/52.04eb91cc.js"><link rel="prefetch" href="/assets/js/53.991201a7.js"><link rel="prefetch" href="/assets/js/54.d3cbc364.js"><link rel="prefetch" href="/assets/js/55.5223e5d4.js"><link rel="prefetch" href="/assets/js/56.18b76502.js"><link rel="prefetch" href="/assets/js/57.c0f61a4b.js"><link rel="prefetch" href="/assets/js/58.9e5c1457.js"><link rel="prefetch" href="/assets/js/59.6143129d.js"><link rel="prefetch" href="/assets/js/6.0ad6f5f5.js"><link rel="prefetch" href="/assets/js/60.35619531.js"><link rel="prefetch" href="/assets/js/61.dadc29b6.js"><link rel="prefetch" href="/assets/js/62.69705c54.js"><link rel="prefetch" href="/assets/js/63.2c66e6ff.js"><link rel="prefetch" href="/assets/js/64.a7845f2f.js"><link rel="prefetch" href="/assets/js/65.97964299.js"><link rel="prefetch" href="/assets/js/66.db52d92c.js"><link rel="prefetch" href="/assets/js/67.0ea1855b.js"><link rel="prefetch" href="/assets/js/68.d2bd30d4.js"><link rel="prefetch" href="/assets/js/69.da7ee809.js"><link rel="prefetch" href="/assets/js/7.a0289794.js"><link rel="prefetch" href="/assets/js/70.c5ba7db2.js"><link rel="prefetch" href="/assets/js/71.5314e1d7.js"><link rel="prefetch" href="/assets/js/72.677ae06c.js"><link rel="prefetch" href="/assets/js/73.d4d114b5.js"><link rel="prefetch" href="/assets/js/74.5d364f49.js"><link rel="prefetch" href="/assets/js/75.4a24f8a9.js"><link rel="prefetch" href="/assets/js/76.41d237d2.js"><link rel="prefetch" href="/assets/js/77.9abcabec.js"><link rel="prefetch" href="/assets/js/78.9368caf4.js"><link rel="prefetch" href="/assets/js/79.edd84f95.js"><link rel="prefetch" href="/assets/js/8.2f17b076.js"><link rel="prefetch" href="/assets/js/80.41dec9a6.js"><link rel="prefetch" href="/assets/js/81.218d4a25.js"><link rel="prefetch" href="/assets/js/82.e2348007.js"><link rel="prefetch" href="/assets/js/83.6738b0b3.js"><link rel="prefetch" href="/assets/js/84.ff205803.js"><link rel="prefetch" href="/assets/js/85.b5d1ebbb.js"><link rel="prefetch" href="/assets/js/86.185238b5.js"><link rel="prefetch" href="/assets/js/87.c67c791d.js"><link rel="prefetch" href="/assets/js/88.f7abef37.js"><link rel="prefetch" href="/assets/js/89.3b84cc04.js"><link rel="prefetch" href="/assets/js/9.837330c8.js"><link rel="prefetch" href="/assets/js/90.1c7a72b2.js"><link rel="prefetch" href="/assets/js/91.fe447b95.js"><link rel="prefetch" href="/assets/js/92.0e6f6748.js"><link rel="prefetch" href="/assets/js/93.e9cba599.js"><link rel="prefetch" href="/assets/js/94.18dc1b5d.js"><link rel="prefetch" href="/assets/js/95.bf87e922.js"><link rel="prefetch" href="/assets/js/96.d251d48f.js"><link rel="prefetch" href="/assets/js/97.7f1fb428.js"><link rel="prefetch" href="/assets/js/98.5db5abd9.js"><link rel="prefetch" href="/assets/js/99.629a34db.js">
    <link rel="stylesheet" href="/assets/css/0.styles.587b07ae.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">大前端</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">主页</a></div><div class="nav-item"><a href="/guide/" class="nav-link">简介</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">前端</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/interview/" class="nav-link">面试</a></li><li class="dropdown-item"><!----> <a href="/React/" class="nav-link">React</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">博客</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/2019/" class="nav-link">2019</a></li><li class="dropdown-item"><!----> <a href="/blog/2018/" class="nav-link">2018</a></li><li class="dropdown-item"><!----> <a href="/blog/2017/" class="nav-link">2017</a></li><li class="dropdown-item"><!----> <a href="/blog/2016/" class="nav-link router-link-active">2016</a></li></ul></div></div><div class="nav-item"><a href="/about/" class="nav-link">关于</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">选择语言</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/guide/" class="nav-link">中文</a></li></ul></div></div><div class="nav-item"><a href="https://github.com/fairyly/VuePressDoc" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">主页</a></div><div class="nav-item"><a href="/guide/" class="nav-link">简介</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">前端</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/interview/" class="nav-link">面试</a></li><li class="dropdown-item"><!----> <a href="/React/" class="nav-link">React</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">博客</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/2019/" class="nav-link">2019</a></li><li class="dropdown-item"><!----> <a href="/blog/2018/" class="nav-link">2018</a></li><li class="dropdown-item"><!----> <a href="/blog/2017/" class="nav-link">2017</a></li><li class="dropdown-item"><!----> <a href="/blog/2016/" class="nav-link router-link-active">2016</a></li></ul></div></div><div class="nav-item"><a href="/about/" class="nav-link">关于</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">选择语言</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/guide/" class="nav-link">中文</a></li></ul></div></div><div class="nav-item"><a href="https://github.com/fairyly/VuePressDoc" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/blog/2016/" class="sidebar-link">2016 diary</a></li><li><a href="/blog/2016/2016-10-19-hello-2016.html" class="sidebar-link">2016-10-19</a></li><li><a href="/blog/2016/2016-10-20-git-github-note.html" class="sidebar-link">2016-10-20 git</a></li><li><a href="/blog/2016/2016-10-21-hexo-markdown-command.html" class="sidebar-link">2016-10-21 Hexo</a></li><li><a href="/blog/2016/2016-10-22-js-module-bundle.html" class="sidebar-link">2016-10-22 webpack</a></li><li><a href="/blog/2016/2016-10-23-jq-plugin-dev.html" class="sidebar-link">2016-10-23 jQuery插件开发</a></li><li><a href="/blog/2016/2016-10-29-wx-app-dev.html" class="active sidebar-link">2016-10-29 微信小程序开发</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/2016/2016-10-29-wx-app-dev.html#微信的小程序" class="sidebar-link">微信的小程序</a></li><li class="sidebar-sub-header"><a href="/blog/2016/2016-10-29-wx-app-dev.html#小程序问题" class="sidebar-link">小程序问题</a></li><li class="sidebar-sub-header"><a href="/blog/2016/2016-10-29-wx-app-dev.html#微信小程序运行环境" class="sidebar-link">微信小程序运行环境</a></li><li class="sidebar-sub-header"><a href="/blog/2016/2016-10-29-wx-app-dev.html#微信小程序canvas游戏限制分析" class="sidebar-link">微信小程序Canvas游戏限制分析</a></li><li class="sidebar-sub-header"><a href="/blog/2016/2016-10-29-wx-app-dev.html#使用开发工具模拟的和真机差异还是比较大的。" class="sidebar-link">使用开发工具模拟的和真机差异还是比较大的。</a></li><li class="sidebar-sub-header"><a href="/blog/2016/2016-10-29-wx-app-dev.html#problem" class="sidebar-link">problem</a></li></ul></li><li><a href="/blog/2016/2016-11-29-Vue-dev.html" class="sidebar-link">2016-11-29 Vue2.0+Mint UI+Vue-router+Vux构建移动端APP</a></li><li><a href="/blog/2016/2016-12-29-js-this.html" class="sidebar-link">2016-12-29 js中this在不同环境的指向</a></li></ul> </aside> <main class="page"> <div class="content default"><h1 id="_2016-10-29-微信小程序开发"><a href="#_2016-10-29-微信小程序开发" aria-hidden="true" class="header-anchor">#</a> 2016-10-29 微信小程序开发</h1> <blockquote><p>Here we go!</p></blockquote> <h2 id="微信的小程序"><a href="#微信的小程序" aria-hidden="true" class="header-anchor">#</a> 微信的小程序</h2> <p>❥ღ❣♔♕♖♚♛♜☀☁☂☃☼☽☾♨❄❅❆★☆✦✪✫✿</p> <p>既然这么火，那就学习一下，这段也在学习微信小程序的开发，</p> <p>基本懂得了小程序的开发流程了，自己就试着写个小计算器看看，</p> <p>发现业务逻辑写的真多，觉得要开发小程序首先得熟悉html+css+javascript,</p> <p>JS精通的最好，还懂些es6更好！</p> <p>除了官方给出的问题，像脚本内不能使用window等对象，</p> <p>不能使用jquery、zepto框架、一个应用同时只能打开5个页面，</p> <p>当已经打开了5个页面之后，wx.navigateTo不能正常打开新页面。</p> <p>请避免多层级的交互方式，或者使用wx.redirectTo、样式表不支持级联选择器，</p> <p>WXSS支持以.开始的类选择器；</p> <p>发现有很多问题，有很多限制，好多web中的API还不能应用到小程序中，</p> <p>小程序的环境相对还是有些封闭的。</p> <p>1、小程序中的this指向的是page;<br>
2、小程序不支持WEBGL，不支持3D；<br>
3、不支持canvas的API；<br>
4、不支持ajax,可以用微信的API：wx.request(),请求外部API接口好像有些问题;</p> <h2 id="小程序问题"><a href="#小程序问题" aria-hidden="true" class="header-anchor">#</a> 小程序问题</h2> <blockquote></blockquote> <p>基本懂得了小程序的开发流程了，自己就试着写个小计算器看看，<br>
发现业务逻辑写的真多，<br>
觉得要开发小程序首先得熟悉html+css+javascript,<br>
JS精通的最好，还懂些es6更好！<br>
官方给出的问题：<br>
像脚本内不能使用window等对象，<br>
不能使用jquery、zepto框架、<br>
一个应用同时只能打开5个页面，<br>
当已经打开了5个页面之后，<br>
wx.navigateTo不能正常打开新页面。<br>
请避免多层级的交互方式，<br>
或者使用wx.redirectTo、<br>
样式表不支持级联选择器，<br>
WXSS支持以.开始的类选择器；<br>
发现有很多问题，有很多限制，好多web中的API还不能应用到小程序中，<br>
小程序的环境相对还是有些封闭的。<br>
1、小程序中的this指向的是page;<br>
2、小程序不支持WEBGL；<br>
3、不支持canvas的API；<br>
4、不支持ajax,可以用微信的API：wx.request(),请求外部API接口好像有些问题;<br>
5、不支持eval();</p> <h2 id="微信小程序运行环境"><a href="#微信小程序运行环境" aria-hidden="true" class="header-anchor">#</a> 微信小程序运行环境</h2> <blockquote></blockquote> <p>1、完全封闭的环境不等于浏览器环境
2、WXML/WXSS/JS格式
3、WXML 不等于 HTML
4、WXSS 不等于 CSS3
5、JS：支持ES6，ES5，不支持DOM(window,document,event,etc...)
6、不支持WEBGL,包含部分Canvas API
7、封闭的发布渠道：程序需通过官方IDE提交审核
8、腾讯完全控制客户端底层的内部实现</p> <h2 id="微信小程序canvas游戏限制分析"><a href="#微信小程序canvas游戏限制分析" aria-hidden="true" class="header-anchor">#</a> 微信小程序Canvas游戏限制分析</h2> <blockquote></blockquote> <p>1、不支持Affine Transform 矩阵设置<br>
2、不支持globalAlpha（忘记淡入淡出）<br>
3、不支持贴图变色（无法创建缓存Canvas对象）
4、不支持图集（无法创建Image对象）
5、不支持BMFont字体
6、不支持剪裁（忘记ScrollView)
7、不支持WebGL，所以不支持任何高级特效
8、严格的模块化，不支持全局变量注入，只支持global下注入
9、不支持项目内文件加载
10、不支持多点触摸
11、不支持文字排版：换行，居中等
12、不支持九宫格、重复填充、网格等渲染模式
13、不支持skew
14、不支持混合模式
15、支持Creator组件：Label，Sprite,Button,Widget,Layout,Animation,其他都不支持</p> <h2 id="使用开发工具模拟的和真机差异还是比较大的。"><a href="#使用开发工具模拟的和真机差异还是比较大的。" aria-hidden="true" class="header-anchor">#</a> 使用开发工具模拟的和真机差异还是比较大的。</h2> <p>还是真机调试比较靠谱。</p> <h3 id="_1-wxml-html"><a href="#_1-wxml-html" aria-hidden="true" class="header-anchor">#</a> 1. WXML(HTML)</h3> <div class="language- line-numbers-mode"><pre class="language-text"><code>1.1 小程序的WXML没有HTML的宽容度那么高，单标签必需是 /&gt; 结尾的。不然会报错。

1.2 官方推荐使用的基础标签&lt;view&gt;是块标签，给了&lt;text&gt;作为文本标签，
    但是使用其他标签比如div也是可以使用的，并且都是inline标签。
    并且wxml的parser会把标签上的不在白名单上的属性都去掉，
    class, id, data 这些应该都在白名单内，但是href什么的是不会有的，
    所以如果你用传统的html的标签构建页面理论上也是可行的，
    不过这些都是inline标签，需要自行设定display。

1.3 scroll-view 的scroll-top, scroll-left 是可以修改scroll-view的滚动位置的。
    但是用户自己滚动了之后小程序并不会去改变 scroll-top, scroll-left 的赋值（并不是双向同步的）。
    如果这时使用setData去修改的话，scroll-top, scroll-left 的赋值和上一次的值相同，
    小程序是不会运用这个修改的，所以表现就是设置没有生效。这时只能先设置一个其他值，
    再设置回去（这里还可以体现setData方法是同步的）。
    scroll-view 获取scroll位置，只能通过bindscroll的回调函数获取，
    所以需要取scroll位置的请自行预存好。scroll-view 还是有webview的 scroll 的臭毛病，
    在居顶位置如果第一个动作是向下滚动的，会导致之后手怎么滑都滚不动，设置scroll-top 不为0，设个1就好了。

1.4 input 目前只支持文字居左，其他都是不行的（模拟器可以）。
    如果你做表单，建议把input等表单元素都放在form中，from触发submit时会返回内部所有表单元素的name-value。
    不然只能绑定所有表单元素的 change 事情来获取，甚是麻烦。
1.5 只有  checkbox-group 有 change 事件，单个的checkbox是没有的，
    如果你只有一个checkbox， 觉得外面套一个checkbox-group麻烦又不美观的话，
    可以用 switch type=&quot;checkbox&quot; 代替。

1.6 map 组建目前直接在app第一个页面加载会出现加载失败。需要在onLoad之后再加在。
    可以先wx:if=&quot;false&quot; 然后onLoad的之后改成 true 就行了。

1.7 map, canvas 像是在webview上面盖一个native组件的感觉。
    它们是没法被overflow 以及 上面盖元素的，你可以认为z-index写多高都没法在他上面。
    所以不建议在页面上做弹层和蒙层。canvas 无法放在scroll-view中滚动会定位在初始位置，
    如果你给canvas设置背景颜色的话，你会发现背景色块跟着滚了，图没滚。

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br></div></div><h3 id="_2-wxss-css"><a href="#_2-wxss-css" aria-hidden="true" class="header-anchor">#</a> 2. WXSS(CSS)</h3> <div class="language- line-numbers-mode"><pre class="language-text"><code>2.1 WXSS 和 CSS很像，基本所有的CSS都支持，小程序还提供了 rpx 这个单位。
    一屏幕宽是750rpx。推荐使用这个来作为布局。不过有一些细小的差别我下面会列出

2.2 WXSS不支持 大括号嵌套（{{}} ）。所以key-frames，CSS animation 就不可用了，不过transition 是可用的。

2.3 目前测试引入字体也是不可用的，前面WXML中提到的内容看SVG也是没法使用的。所以icon目前只能用图的方式做了。

2.4 WXSS中是不能引入本地资源的, 只能使用线上资源（模拟器是可以，但是别信），可以使用base64。

2.5 WXSS的 rule 是不支持集联的。所以不能 body .main {background:#000;} 这么写。所以写起来还是比较费劲的。
    每个class都得很长，不然怕重名。不过支持 li.current {color: red;} 这样的写法，支持after， before伪类，
    但是不支持 first-child last-child nth-child 这类伪类。

2.6 app.wxss 和每个 page 的wxss 的覆盖关系是: 如果有同名 rule 的话，page 会覆盖 app 的，不是merge是覆盖。


</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><h3 id="_3-js"><a href="#_3-js" aria-hidden="true" class="header-anchor">#</a> 3. JS</h3> <div class="language- line-numbers-mode"><pre class="language-text"><code>
3.1 JS 的运行环境和view的运行环境是隔离的。JS只能通过事件获取时机和setData方法修改数据来改变view。

3.2 JS 目前有个很大的问题是无法获取到页面px级的宽度高度, 所有事件回调的单位都是px级的而不是rpx的，
    但是又不知道当前rpx，px的转换关系。比如过你用canvas画图。你都不知道边界在哪里，这个很蛋疼。

3.3 上面有说过 setData方法如果上一个值和下一个值相同时，是不会触发view修改的（见1.3）

3.4 使用 navigate 跳转的时候可以使用queryString的方式跟在相对地址上，
    onLoad事件会在入参中传入（会转化成object），但是 navigate back的时候没有一个官方给出的数据通讯机制。
    可以使用getApp() 获取到全局对象，给上面加点东西，自行实现。navigate 最多5个什么的就不说了。

3.5 canvas getActions被调用之后，actions是会被清空的。即连续调用两次getActions，第二次是空数组。

3.6 开发者工具是nw写的，我就看了看裙底的源码，开发者工具中WXML确实是有parser再拼装的过程的。
    但是并不能说明小工具是native的，从css的支持力度到webview的一些bug相似度来看，
    我还是觉得像webview，但是组件比如map，canvas什么的用的是原生view，然后盖在webview上的感觉。
    
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><blockquote><blockquote><blockquote><p>working study......</p></blockquote></blockquote></blockquote> <h2 id="problem"><a href="#problem" aria-hidden="true" class="header-anchor">#</a> problem</h2> <p>1、app.json中页面注册顺序问题：  
有时候已经在app.json中pages注册了多个页面，<br>
运行时候会提示没有注册这些页面，<br>
需要把这些注册的页面顺序向index前调换下；</p> <p>2、tabBar设置不显示：  
还有使用tabbarde时候，在app.json中注册后，<br>
tab链接对应的注册页面顺序也要往前调调，不然会无法显示tabbar;<br>
微信小程序的逻辑是&quot;pages&quot;中的第一个页面是首页，<br>
也就是程序启动后第一个显示的页面，<br>
如果tabBar的list的pagePath指定的页面都不是pages的第一个，<br>
当然也就不会显示tabBar了。</p> <p>3、页面图片src用数据绑定,显示图片的时候，pages中注册页面加载顺序也得变下才会显示；</p> <p>4、canvas绘制图片的时候模拟器不会绘制显示出来，真机可以；包括上传的图片也可以绘制，取得是src,即res.tempFilePaths[0]</p> <p>5、input模拟器与真机差异：模拟器样式可以有边框，文字居中；真机没有边框，文字没有居中，一直左对齐</p> <p>6、view设置fixed，里面一个input，bottom设置0，输入法键盘唤出总会遮挡input一部分；</p> <p>7、post 的时候把Content-Type 这个去掉 就行了</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>    wx.request({
      url: 'https://xxxxxx',
          data: e.detail.value,
         method:'POST',
     // header: {
     //     'Content-Type':'application/x-www-from-urlencoded'
        // },
    success: function(res) {
                console.log(res.data)
         }
     })
     
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p>注释掉成功拿到参数，不注释数据就是空。</p> <p>8、有时候会出现appservice错误，导致页面无法显示，
  解决方法：<strong>就是在设置里面设置下，不使用任何代理</strong></p> <p>9、官方的canvas一个接口过于简单：wx.canvasToTempFilePath(OBJECT)<br>
把当前画布的内容导出生成图片，并返回文件路径<br>
  完整的如下（有点问题，模拟器直接fail，真机可以测试到文件路径，却找不到文件）：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>    var that=this;
    wx.canvasToTempFilePath({ 
        canvasId: 1,
        success: function (res) {
                console.log(res.tempFilePath); 
                 that.setData({filesave:res.tempFilePath})
                wx.saveFile({
                  tempFilePath: res.tempFilePath,
                  success: function success(res) {
                    console.log('saved::' + res.savedFilePath);
                    that.setData({filesave:res.savedFilePath})
                  },
                  complete: function fail(e) {
                    console.log(e.errMsg);
                  }
                }); 
         },
        fail: function (res) {
            console.log(res);  
            that.setData({filesave:res.errMsg})  
        }
      });
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br></div></div><blockquote><blockquote><blockquote><p>come on!</p></blockquote></blockquote></blockquote></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/blog/2016/2016-10-23-jq-plugin-dev.html" class="prev">
          2016-10-23 jQuery插件开发
        </a></span> <span class="next"><a href="/blog/2016/2016-11-29-Vue-dev.html">
          2016-11-29 Vue2.0+Mint UI+Vue-router+Vux构建移动端APP
        </a>
        →
      </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.044c1617.js" defer></script><script src="/assets/js/2.5cf661ab.js" defer></script><script src="/assets/js/38.b37821e4.js" defer></script>
  </body>
</html>
